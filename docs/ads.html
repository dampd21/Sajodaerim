<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>광고 관리 - 역대짬뽕</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="ads.css">
</head>
<body>
    <div class="container">
        <!-- 네비게이션 -->
        <nav class="main-nav">
            <a href="index.html" class="nav-link">발주 리포트</a>
            <a href="sales.html" class="nav-link">매출 관리</a>
            <a href="ads.html" class="nav-link">광고 관리</a>
            <a href="review.html" class="nav-link">리뷰 관리</a>
        </nav>

        <header class="header">
            <h1>광고 관리</h1>
            <p class="update-time" id="updateTime"></p>
        </header>

        <!-- 플랫폼 선택 탭 -->
        <nav class="platform-tabs">
            <button class="platform-tab active" data-platform="naver">
                <span class="platform-name">네이버</span>
            </button>
            <button class="platform-tab disabled" data-platform="instagram">
                <span class="platform-name">인스타그램</span>
                <span class="badge-coming">미구현</span>
            </button>
            <button class="platform-tab disabled" data-platform="daangn">
                <span class="platform-name">당근마켓</span>
                <span class="badge-coming">미구현</span>
            </button>
            <button class="platform-tab disabled" data-platform="youtube">
                <span class="platform-name">유튜브</span>
                <span class="badge-coming">미구현</span>
            </button>
            <button class="platform-tab disabled" data-platform="delivery">
                <span class="platform-name">배달</span>
                <span class="badge-coming">미구현</span>
            </button>
        </nav>

        <!-- 배달 하위 탭 (배달 선택 시만 표시) -->
        <nav class="delivery-subtabs" id="deliverySubtabs" style="display: none;">
            <button class="delivery-tab" data-delivery="baemin">배달의민족</button>
            <button class="delivery-tab" data-delivery="yogiyo">요기요</button>
            <button class="delivery-tab" data-delivery="coupang">쿠팡이츠</button>
            <button class="delivery-tab" data-delivery="ddangyo">땡겨요</button>
        </nav>

        <!-- 필터 섹션 -->
        <section class="filter-section">
            <div class="filter-group">
                <label>지점 선택</label>
                <select id="storeSelect" class="filter-select">
                    <option value="">전체 지점</option>
                </select>
            </div>
            <div class="filter-group">
                <label>캠페인</label>
                <select id="campaignSelect" class="filter-select">
                    <option value="">전체 캠페인</option>
                </select>
            </div>
            <div class="filter-group">
                <label>광고그룹</label>
                <select id="adgroupSelect" class="filter-select">
                    <option value="">전체 광고그룹</option>
                </select>
            </div>
            <div class="filter-group">
                <label>상태</label>
                <select id="statusSelect" class="filter-select">
                    <option value="">전체</option>
                    <option value="active">활성</option>
                    <option value="paused">일시중지</option>
                </select>
            </div>
        </section>

        <!-- 플랫폼별 콘텐츠 -->
        <div class="platform-content">
            
            <!-- ========== 네이버 광고 ========== -->
            <section id="naverContent" class="platform-pane active">
                
                <!-- 요약 카드 -->
                <section class="summary-cards">
                    <div class="card">
                        <div class="card-label">총 캠페인</div>
                        <div class="card-value" id="totalCampaigns">-</div>
                    </div>
                    <div class="card">
                        <div class="card-label">총 광고그룹</div>
                        <div class="card-value" id="totalAdgroups">-</div>
                    </div>
                    <div class="card">
                        <div class="card-label">총 키워드</div>
                        <div class="card-value" id="totalKeywords">-</div>
                    </div>
                    <div class="card">
                        <div class="card-label">활성 키워드</div>
                        <div class="card-value" id="activeKeywords">-</div>
                    </div>
                </section>

                <!-- 탭 -->
                <nav class="tabs">
                    <button class="tab active" data-tab="keywords">키워드 관리</button>
                    <button class="tab" data-tab="searchVolume">검색량 분석</button>
                    <button class="tab" data-tab="bidSuggestion">입찰가 추천</button>
                </nav>

                <!-- 키워드 관리 탭 -->
                <section id="keywords" class="tab-pane active">
                    <div class="section-header">
                        <h3>키워드 목록</h3>
                        <div class="section-actions">
                            <input type="text" id="keywordSearch" placeholder="키워드 검색..." class="search-input">
                            <button class="btn btn-primary" id="saveChangesBtn" disabled>
                                💾 변경사항 저장
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-wrapper">
                        <table class="data-table" id="keywordTable">
                            <thead>
                                <tr>
                                    <th class="col-checkbox">
                                        <input type="checkbox" id="selectAll">
                                    </th>
                                    <th class="sortable-header" data-sort="keyword">
                                        키워드 <span class="sort-icon">↕</span>
                                    </th>
                                    <th class="sortable-header" data-sort="campaign">
                                        캠페인 <span class="sort-icon">↕</span>
                                    </th>
                                    <th class="sortable-header" data-sort="adgroup">
                                        광고그룹 <span class="sort-icon">↕</span>
                                    </th>
                                    <th class="sortable-header text-right" data-sort="bidAmt">
                                        현재 입찰가 <span class="sort-icon">↕</span>
                                    </th>
                                    <th class="text-right">새 입찰가</th>
                                    <th class="sortable-header text-right" data-sort="searchVolume">
                                        월간 검색량 <span class="sort-icon">↕</span>
                                    </th>
                                    <th class="sortable-header text-center" data-sort="compIdx">
                                        경쟁도 <span class="sort-icon">↕</span>
                                    </th>
                                    <th class="text-center">상태</th>
                                </tr>
                            </thead>
                            <tbody id="keywordTableBody"></tbody>
                        </table>
                    </div>
                    
                    <!-- 일괄 작업 바 -->
                    <div class="bulk-action-bar" id="bulkActionBar" style="display: none;">
                        <span class="selected-count"><span id="selectedCount">0</span>개 선택됨</span>
                        <div class="bulk-actions">
                            <input type="number" id="bulkBidAmt" placeholder="일괄 입찰가" class="bulk-input">
                            <button class="btn btn-secondary" id="bulkApplyBtn">일괄 적용</button>
                            <button class="btn btn-outline" id="bulkIncreaseBtn">+10%</button>
                            <button class="btn btn-outline" id="bulkDecreaseBtn">-10%</button>
                        </div>
                    </div>
                </section>

                <!-- 검색량 분석 탭 -->
                <section id="searchVolume" class="tab-pane">
                    <div class="chart-container">
                        <h3>키워드별 월간 검색량 TOP 20</h3>
                        <div id="searchVolumeChartContainer" class="chart-canvas-container">
                            <canvas id="searchVolumeChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-row">
                        <div class="chart-container half">
                            <h3>PC vs 모바일 검색량</h3>
                            <div id="deviceChartContainer" class="chart-canvas-container-small">
                                <canvas id="deviceChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-container half">
                            <h3>경쟁도 분포</h3>
                            <div id="compChartContainer" class="chart-canvas-container-small">
                                <canvas id="compChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 입찰가 추천 탭 -->
                <section id="bidSuggestion" class="tab-pane">
                    <div class="section-header">
                        <h3>순위별 예상 입찰가</h3>
                        <p class="hint">클릭하여 해당 입찰가를 적용할 수 있습니다.</p>
                    </div>
                    
                    <div class="table-wrapper">
                        <table class="data-table" id="bidSuggestionTable">
                            <thead>
                                <tr>
                                    <th>키워드</th>
                                    <th class="text-right">현재 입찰가</th>
                                    <th class="text-right">월간 검색량</th>
                                    <th class="text-center">경쟁도</th>
                                    <th class="text-right">예상 클릭비용</th>
                                    <th class="text-center">추천</th>
                                </tr>
                            </thead>
                            <tbody id="bidSuggestionTableBody"></tbody>
                        </table>
                    </div>
                </section>
            </section>

            <!-- ========== 미구현 플랫폼들 ========== -->
            <section id="instagramContent" class="platform-pane">
                <div class="coming-soon-box">
                    <div class="coming-soon-icon">📷</div>
                    <h2>인스타그램 광고 관리</h2>
                    <p>준비 중입니다</p>
                    <span class="coming-soon-badge">Coming Soon</span>
                </div>
            </section>

            <section id="daangnContent" class="platform-pane">
                <div class="coming-soon-box">
                    <div class="coming-soon-icon">🥕</div>
                    <h2>당근마켓 광고 관리</h2>
                    <p>준비 중입니다</p>
                    <span class="coming-soon-badge">Coming Soon</span>
                </div>
            </section>

            <section id="youtubeContent" class="platform-pane">
                <div class="coming-soon-box">
                    <div class="coming-soon-icon">▶️</div>
                    <h2>유튜브 광고 관리</h2>
                    <p>준비 중입니다</p>
                    <span class="coming-soon-badge">Coming Soon</span>
                </div>
            </section>

            <section id="deliveryContent" class="platform-pane">
                <div class="coming-soon-box">
                    <div class="coming-soon-icon">🛵</div>
                    <h2>배달 플랫폼 광고 관리</h2>
                    <p>배달의민족 · 요기요 · 쿠팡이츠 · 땡겨요</p>
                    <span class="coming-soon-badge">Coming Soon</span>
                </div>
            </section>
        </div>

        <!-- 입찰가 변경 확인 모달 -->
        <div class="modal" id="confirmModal">
            <div class="modal-content modal-small">
                <span class="modal-close">&times;</span>
                <h2>입찰가 변경 확인</h2>
                <div class="modal-body">
                    <div class="confirm-list" id="confirmList"></div>
                    <div class="confirm-warning">
                        <span class="warning-icon">⚠️</span>
                        변경사항은 즉시 네이버 광고에 반영됩니다.
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-outline" id="cancelConfirmBtn">취소</button>
                        <button class="btn btn-primary" id="applyConfirmBtn">변경 적용</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 로딩 오버레이 -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-spinner"></div>
            <p>처리 중...</p>
        </div>
    </div>

    <script src="ads.js"></script>
    <script src="ai-chat.js"></script>
</body>
</html>
